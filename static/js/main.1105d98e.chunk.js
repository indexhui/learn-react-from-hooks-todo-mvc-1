(this["webpackJsonptodo-mvc"]=this["webpackJsonptodo-mvc"]||[]).push([[0],{17:function(e,t,n){},19:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(4),c=n.n(a),o=n(11),s=n.n(o),i=(n(17),n(1)),u=n.n(i),d=n(2),l=n(10),f=n(3),j=n(6),p=(n(19),n(8)),h=function(e){var t=e.inputValue,n=e.handleChange,a=e.handleKeyPress,c=e.handleAddTodo;return Object(r.jsxs)("div",{className:Object(p.a)("add-todo",{active:t.length>0}),children:[console.log("[render] addTodo"),Object(r.jsx)("label",{className:"add-todo-icon icon",htmlFor:"add-todo-input"}),Object(r.jsx)("div",{className:"add-todo-input",children:Object(r.jsx)("input",{id:"add-todo-input",type:"text",placeholder:"\u65b0\u589e\u5de5\u4f5c",onChange:n,onKeyPress:a,value:t})}),Object(r.jsx)("div",{className:"add-todo-action",children:Object(r.jsxs)("button",{className:"btn-reset btn-add",onClick:c,children:[" ","\u65b0\u589e"," "]})})]})},b=function(e){var t=e.numOfTodos;return Object(r.jsxs)("footer",{children:[console.log("[render] footer"),Object(r.jsxs)("p",{children:["\u5269\u9918\u9805\u76ee\u6578\uff1a",t]})]})},O=function(){return Object(r.jsxs)("header",{children:[console.log("[render] header"),Object(r.jsx)("h3",{children:"Tasks"})]})},v=function(e){var t=e.todo,n=e.handleDelete,c=e.handleSave,o=e.handleToggleIsDone,s=e.updateIsEdit,i=Object(a.useState)(t.title),u=Object(j.a)(i,2),d=u[0],l=u[1];return console.log("[render] TodoItem"),Object(r.jsxs)("div",{className:Object(p.a)("task-item",{done:t.isDone,edit:t.isEdit}),children:[Object(r.jsx)("div",{className:"task-item-checked",children:Object(r.jsx)("span",{className:"icon icon-checked",onClick:o(t.id)})}),Object(r.jsxs)("div",{className:"task-item-body",onDoubleClick:function(){return s({id:t.id,isEdit:!0})},children:[Object(r.jsx)("span",{className:"task-item-body-text",children:t.title}),Object(r.jsx)("input",{className:"task-item-body-input",type:"text",placeholder:"\u65b0\u589e\u5de5\u4f5c",value:d,onChange:function(e){l(e.target.value)},onKeyDown:function(e){console.log({keyCode:e.keyCode,key:e.key}),13===e.keyCode&&0!==d.length&&c({id:t.id,title:d}),27===e.keyCode&&(s({id:t.id,isEdit:!1}),l(t.title))}})]}),Object(r.jsx)("div",{className:"task-item-action",children:Object(r.jsx)("button",{className:"btn-reset btn-destroy icon",onClick:n(t.id),children:" "})})]})},x=function(e){var t=e.todos,n=e.handleDelete,a=e.handleSave,c=e.handleToggleIsDone,o=e.updateIsEdit;return Object(r.jsxs)("div",{className:"todos",children:[console.log("[render] todos"),t.map((function(e){return Object(r.jsx)(v,{todo:e,handleDelete:n,handleSave:a,handleToggleIsDone:c,updateIsEdit:o},e.id)}))]})},m="http://localhost:3001",g=function(){var e=Object(f.a)(u.a.mark((function e(t){var n,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.title,r=t.isDone,e.next=3,fetch("".concat(m,"/todos"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:n,isDone:r})});case 3:return a=e.sent,e.abrupt("return",a.json());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(f.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(m,"/todos/").concat(t),{method:"DELETE"});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(f.a)(u.a.mark((function e(t){var n,r,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=t.title,a=t.isDone,e.next=3,fetch("".concat(m,"/todos/").concat(n),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:r,isDone:a})});case 3:return c=e.sent,e.next=6,c.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var D=function(){var e=Object(a.useState)(""),t=Object(j.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)([]),s=Object(j.a)(o,2),i=s[0],p=s[1],v=i.filter((function(e){return!e.isDone})).length,D=function(){var e=Object(f.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==n.length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,g({title:n,isDone:!1});case 4:t=e.sent,p((function(e){return[].concat(Object(l.a)(e),[Object(d.a)(Object(d.a)({},t),{},{isEdit:!1})])})),c("");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(f.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"===t.key){e.next=2;break}return e.abrupt("return");case 2:if(0!==n.length){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,g({title:n,isDone:!1});case 6:r=e.sent,p((function(e){return[].concat(Object(l.a)(e),[Object(d.a)(Object(d.a)({},r),{},{isEdit:!1})])})),c("");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(f.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=t.title,e.next=3,y({id:n,title:r});case 3:p((function(e){return e.map((function(e){return e.id!==n?e:Object(d.a)(Object(d.a)({},e),{},{title:r,isEdit:!1})}))}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){(function(){var e=Object(f.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(m,"/todos")).then((function(e){return e.json()}));case 2:t=e.sent,p(t.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{isEdit:!1})})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),console.log("[render] app"),Object(r.jsxs)("div",{className:"app",children:[Object(r.jsx)(O,{}),Object(r.jsx)(h,{inputValue:n,handleChange:function(e){c(e.target.value)},handleKeyPress:w,handleAddTodo:D}),Object(r.jsx)(x,{todos:i,handleDelete:function(e){return Object(f.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k(e);case 2:p((function(t){return t.filter((function(t){return t.id!==e}))}));case 3:case"end":return t.stop()}}),t)})))},handleSave:E,handleToggleIsDone:function(e){return Object(f.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.find((function(t){return t.id===e})),t.next=3,y({id:e,isDone:!n.isDone});case 3:p((function(t){return t.map((function(t){return t.id!==e?t:Object(d.a)(Object(d.a)({},t),{},{isDone:!t.isDone})}))}));case 4:case"end":return t.stop()}}),t)})))},updateIsEdit:function(e){var t=e.id,n=e.isEdit;p((function(e){return e.map((function(e){return e.id!==t?e:Object(d.a)(Object(d.a)({},e),{},{isEdit:n})}))}))}}),Object(r.jsx)(b,{numOfTodos:v})]})},w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,21)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))};s.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(D,{})}),document.getElementById("root")),w()}},[[20,1,2]]]);
//# sourceMappingURL=main.1105d98e.chunk.js.map